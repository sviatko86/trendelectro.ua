async function init() {
    try {
        // Додаємо випадкове число до назви файлу, щоб браузер не показував старі дані (кеш)
        const res = await fetch('data.csv?nocache=' + new Date().getTime());
        const text = await res.text();
        
        // Розбиваємо на рядки і прибираємо пусті
        const lines = text.split(/\r?\n/).filter(l => l.trim() !== "");
        
        products = lines.slice(1).map(line => {
            // Використовуємо регулярний вираз, щоб правильно розділити навіть якщо є лапки
            const parts = line.split(',');
            
            if (parts.length < 2) return null;

            const sku = parts[0].replace(/"/g, '').trim(); // Артикул
            const rawPrice = parseFloat(parts[parts.length - 1]); // Завжди останній елемент — ціна
            
            // Назва — це все, що між першим і останнім елементом
            let name = parts.slice(1, -1).join(', ').replace(/"/g, '').trim();
            
            // Якщо ціна є — рахуємо націнку, якщо ні — товар не додаємо
            if (!isNaN(rawPrice)) {
                const price = Math.round(rawPrice * 1.5);
                return { sku, name, price };
            }
            return null;
        }).filter(p => p !== null);

        console.log("Завантажено товарів:", products.length);
        renderProducts(products);
        updateCartUI();
    } catch (e) { 
        console.error("Помилка:", e);
        alert("Проблема з файлом даних!"); 
    }
}
